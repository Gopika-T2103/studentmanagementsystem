
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Teacher Dashboard</title>

  <!-- icons -->
  <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">

  <!-- css -->
  <link rel="stylesheet" href="{% static 'css/teacher_dashboard.css' %}?v=5">

  <!-- charts -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
</head>
<body>
  <!-- top bar for small screens -->
  <div class="topbar">
    <i class='bx bx-menu hamburger' onclick="toggleSidebar()"></i>
    <div class="brand">Apex International - Teacher Dashboard</div>
  </div>

  <!-- SIDEBAR -->
  <aside class="sidebar_teacher">
    <div class="sidebar-top">
      <h2>Teacher</h2>
      <p class="sub">Class Teacher -Grade{{ assingned_class }}</p>
    </div>

    <nav class="navlist">
      <div class="icon-text active">
        <i class='bx bx-grid-alt'></i>
        <a href="#">Dashboard</a>
      </div>

      <div class="icon-text dropdown-btn">
        <i class='bx bx-group'></i>
        <p class="dash">My Class</p>
        <i class='bx bx-chevron-down arrow'></i>
      </div>
      <div class="dropdown-container">
        <a href="{% url 'class_list' %}" >Class List</a>
        <a href="{% url 'add_student' %}" >Add Student</a>
        <a href="{% url 'add_marks' %}" >Add / Edit Marks</a>
        <a href="{% url 'view_marks' %}" >view Marks</a>
        <a href="{% url 'select_attendance_session' %}" >Students Attendance</a>
      </div>

      <div class="icon-text dropdown-btn">
        <i class='bx bx-calendar-alt'></i>
        <p class="dash">My Schedule</p>
        <i class='bx bx-chevron-down arrow'></i>
      </div>
      <div class="dropdown-container">
        <a href="#" onclick="viewTimetable()">Timetable</a>
        <a href="#" onclick="viewHours()">Teaching Hours</a>
        <a href="#" onclick="applyLeave()">Apply Leave</a>
      </div>

      <div class="icon-text dropdown-btn">
        <i class='bx bx-user'></i>
        <p class="dash">My profile</p>
        <i class='bx bx-chevron-down arrow'></i>
      </div>
      <div class="dropdown-container">
        <a href="#" onclick="viewProfile()">Edit Profile</a>
      </div>

      <div class="icon-text" onclick="logout()">
        <i class='bx bx-log-out'></i>
        <p class="dash">Logout</p>
      </div>
    </nav>

    <div class="sidebar-bottom">
      <div class="profile-mini">
        <div class="avatar">s</div>
        <div>
          <div class="name">susan</div>
          <div class="role">maths</div>
        </div>
      </div>
    </div>
  </aside>

  <!-- MAIN CONTENT -->
  <main class="content">
    <h1>Dashboard Overview</h1>

    <!-- TOP CARDS -->
    <div class="card-container">
      <div class="card">
        <h3>Assigned Class & Subjects</h3>
        <hr>
        <p class="muted">Grade {{ assigned_class }} | {{ teacher.tdept }}</p>
        <div class="card-actions">
          <button class="btn"><a href="{%url 'class_list' %}">View Class</a></button>
        </div>
      </div>

      <div class="card">
        <h3>Total Students {{ assigned_class }}</h3>
        <hr>
        <!-- <p class="muted big">35 Students</p> -->
        <div class="card-actions">
          <button class="btn" onclick="manageStudents()">Manage Students</button>
        </div>
      </div>

      <div class="card">
        <h3>Today's Attendance</h3>
        <hr>
        <p class="muted big">32 Present, 3 Absent</p>
        <div class="card-actions">
          <button class="btn" onclick="viewAttendance()">Mark / View</button>
        </div>
      </div>

      <div class="card">
        <h3>Leave Details</h3>
        <hr>
        <p class="muted">Casual: 5 | Sick: 8 | Earned: 12</p>
        <div class="card-actions">
          <button class="btn" onclick="applyLeave()">Apply Leave</button>
        </div>
      </div>
    </div>

    <!-- MIDDLE ROW: TIMETABLE (left) + Departments & My Account (right) -->
    <section class="grid-main">
      <div class="section timetable">
        <h2>My TimeTable</h2>
        <ul>
          <li><strong>09:00 - 10:00</strong> — Maths - 10A</li>
          <li><strong>10:00 - 11:00</strong> — Maths - 10C</li>
          <li><strong>11:00 - 13:00</strong> — Free / Prep</li>
          <li><strong>14:00 - 15:00</strong> — Maths - 9A</li>
        </ul>

        <div class="section-actions">
          <button class="outline" onclick="viewTimetable()">View Full Timetable</button>
          <button onclick="applyLeave()">Apply for Leave</button>
        </div>
      </div>

      <div class="right-column">
        <!-- <div class="section departments">
          <h2>Departments & HODs</h2>
          <ul>
            <li>Mathematics – HOD: Mr. Lee – 35 teachers – 800 students</li>
            <li>Science – HOD: Mrs. Kumar – 40 teachers – 900 students</li>
            <li>English – HOD: Ms. Riya – 28 teachers – 700 students</li>
          </ul>
          <div class="section-actions">
            <button onclick="manageStudents()">Manage Students</button>
            <button onclick="addMarks()">Add Marks</button>
          </div>
        </div> -->

        <div class="section account">
          <h2>My Account</h2>
          <div class="profile-full">
            <p><strong>Name:</strong> Susan</p>
            <p><strong>Qualification:</strong> M.Sc. Mathematics</p>
            <p><strong>Email:</strong> susan@example.com</p>
            <p><strong>Address:</strong> 21 School Lane, City</p>
            <p><strong>Phone:</strong> +91 98765 43210</p>
          </div>
          <div class="section-actions">
            <button onclick="viewProfile()">Edit Profile</button>
          </div>
        </div>
      </div>
    </section>

    <!-- RESULT / CHART (full width) -->
    <div class="result-section">
      <h2>Class Result Overview</h2>
      <canvas id="resultPieChart"></canvas>
    </div>
  </main>

  <!-- scripts -->
  <script src="{% static 'js/teacher_dashboard.js' %}?v=3"></script>
</body>
</html>
